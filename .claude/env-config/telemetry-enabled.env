# Feature 017: Usage Data Collection System
# Claude Code Telemetry Configuration
# This environment file enables telemetry export to local OTLP collector

# CRITICAL: Enable Claude Code telemetry (required!)
CLAUDE_CODE_ENABLE_TELEMETRY=1

# OTLP Exporter Configuration
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_EXPORTER_OTLP_PROTOCOL=grpc
OTEL_EXPORTER_OTLP_TIMEOUT=10000

# Service Identification
OTEL_SERVICE_NAME=claude-code-telemetry
OTEL_SERVICE_VERSION=1.0.0
OTEL_SERVICE_NAMESPACE=panaversity

# Resource Attributes (add context to telemetry data)
OTEL_RESOURCE_ATTRIBUTES=deployment.environment=local,organization.id=panaversity,user.id=${USER}

# Telemetry Types to Export
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

# Export Intervals (shorter for testing/debugging)
OTEL_METRIC_EXPORT_INTERVAL=10000
OTEL_LOGS_EXPORT_INTERVAL=5000

# Batch Configuration (optimize throughput)
OTEL_BSP_SCHEDULE_DELAY=5000
OTEL_BSP_MAX_QUEUE_SIZE=2048
OTEL_BSP_MAX_EXPORT_BATCH_SIZE=512

# Sampling Configuration (100% sampling for development)
OTEL_TRACES_SAMPLER=always_on
OTEL_TRACES_SAMPLER_ARG=1.0

# SDK Configuration
OTEL_SDK_DISABLED=false
OTEL_LOG_LEVEL=info

# Privacy Controls
ENABLE_PROMPT_HASHING=true
ENABLE_PII_FILTERING=true
SANITIZE_FILE_PATHS=true
OTEL_LOG_USER_PROMPTS=1

# Feature Flags
TELEMETRY_ENABLED=true
DEBUG_MODE=false

# Optional: Custom Attributes
# Add project-specific context to all telemetry events
PROJECT_NAME=ai-native-software-development
BOOK_VERSION=1.0.0
CONSTITUTION_VERSION=v3.1.2

# Note: This file is loaded automatically when using Claude Code with --env flag:
# claude-code --env .claude/env-config/telemetry-enabled.env
#
# Or set as default in your shell profile:
# export CLAUDE_ENV_CONFIG=/path/to/.claude/env-config/telemetry-enabled.env
