.bookWrapper {
    perspective: 2000px;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 60px 0;
    user-select: none;
    -webkit-user-select: none;
}

.book {
    position: relative;
    width: 300px;
    height: 440px;
    transform-style: preserve-3d;
    /* 
       Combine the static resting angle with the dynamic mouse interaction 
       Note: We use a default rotation if variables aren't set, 
       but the React component sets them to 0 on leave.
    */
    transform: rotateY(calc(-25deg + var(--rotate-y, 0deg))) rotateX(calc(10deg - var(--rotate-x, 0deg)));
    transition: transform 0.1s ease-out;
    /* Fast response for mouse tracking */
    box-shadow: 20px 20px 50px rgba(0, 0, 0, 0.3);
}

/* 
 * GEOMETRY FACES 
 * Book Dimensions: 300x440x50
 */

.cover,
.back,
.spineShadow {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 4px;
    /* Slight rounding on corners */
    background-color: #0d1117;
    overflow: hidden;
}

/* FRONT COVER */
.cover {
    transform: translateZ(25px);
    /* Half thickness */
    z-index: 10;
}

/* Dark Mode Rim Light (Edge Highlight) */
:global([data-theme='dark']) .cover {
    box-shadow: inset 1px 1px 0px rgba(255, 255, 255, 0.15);
}

/* BACK COVER */
.back {
    transform: rotateY(180deg) translateZ(25px);
    background: #1e1e1e;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5) inset;
    /* Darker inner */
}

/* SPINE (LEFT) */
.left {
    position: absolute;
    width: 50px;
    /* Thickness */
    height: 100%;
    left: -25px;
    /* Center it on left edge */
    transform: rotateY(-90deg);

    /* Rounded Spine Effect */
    background: linear-gradient(90deg,
            rgba(255, 255, 255, 0.05) 0%,
            rgba(255, 255, 255, 0.2) 30%,
            #0d1117 30%,
            #0d1117 70%,
            rgba(255, 255, 255, 0.2) 70%,
            rgba(255, 255, 255, 0.05) 100%), #0d1117;
    border-radius: 4px;
}

/* 
 * PAGE BLOCK
 * Inset slightly from the covers to create the "hardcover overhang" effect 
 * 
 * Geometry Calculation:
 * Cover Size: 300x440
 * Spine Thickness: 50px (Z: -25 to +25)
 * Page Block Target:
 *   - X: Start at 4px (spine seam), End at 294px (6px inset from right edge)
 *   - Y: Start at 6px (top inset), End at 434px (6px bottom inset)
 *   - Z: Thickness 40px (Z: -20 to +20) -> 5px inset from covers
 */

/* Page Block Geometry: 48px thickness, 8px Inset (Balanced) */

.right,
.top,
.bottom {
    position: absolute;
    background-color: #fafafa;
    /* Paper Texture */
    background-image: repeating-linear-gradient(90deg,
            transparent 0px,
            transparent 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(0, 0, 0, 0.03) 4px);
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
    /* Softer inner shadow */
}

/* Right Face (Side Pages) */
.right {
    width: 48px;
    /* Thickness 48px */
    height: 424px;
    /* Y-Height (440 - 8 top - 8 bottom = 424) */

    /* Position */
    top: 8px;
    left: 268px;
    /* Center X at 292px. (300-8-24 = 268) */

    transform: rotateY(90deg);
}

/* Top Face (Top Pages) */
.top {
    width: 288px;
    /* X-Width (300 - 8 right - 4 spine = 288) */
    height: 48px;
    /* Depth */

    /* Position */
    top: -16px;
    /* Center Y at 8px. (8 - 24 = -16) */
    left: 4px;

    transform: rotateX(90deg);
    background-image: repeating-linear-gradient(0deg,
            transparent 0px,
            transparent 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(0, 0, 0, 0.03) 4px);
}

/* Bottom Face (Bottom Pages) */
.bottom {
    width: 288px;
    height: 48px;

    /* Position */
    bottom: -16px;
    /* Center Y at 432px. Bottom 440. Offset 8. Center 24. (8-24 = -16) */
    left: 4px;

    transform: rotateX(-90deg);
    background-image: repeating-linear-gradient(0deg,
            transparent 0px,
            transparent 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(0, 0, 0, 0.03) 4px);
}


/* 
/* TEXTURES & LIGHTING */
.coverImg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    pointer-events: none;
    /* Prevent dragging the image */
    -webkit-user-drag: none;
}

/* Dynamic Sheen */
.sheen {
    position: absolute;
    inset: 0;
    background: linear-gradient(105deg,
            transparent 20%,
            rgba(255, 255, 255, 0.15) 45%,
            rgba(255, 255, 255, 0.05) 50%,
            transparent 55%);
    mix-blend-mode: hard-light;
    /* Makes colors pop */
    opacity: 0.6;
    pointer-events: none;

    /* Move the gradient based on rotation */
    transform: translateX(calc(var(--rotate-y, 0) * -2px));
    transition: transform 0.1s ease-out;
}

/* Spine Shadow on Cover */
.spineShadow {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 12px;
    background: linear-gradient(to right, rgba(0, 0, 0, 0.4), transparent);
    pointer-events: none;
}


/* RESPONSIVE */
@media screen and (max-width: 768px) {
    .book {
        width: 220px;
        height: 330px;
    }

    .right {
        height: 324px;
    }

    /* 330 - 6 */
    .top,
    .bottom {
        width: 212px;
    }

    /* 220 - 6 */

    /* Recalculate positions if using pixels, but the transform logic should mostly hold if we used percentages. 
       Since we used strict pixels, we need specific overrides. */

    .right {
        left: 200px;
        /* 220 container width. Inset 6? 214? 
           Width is still 40px? Let's assume depth scales too? 
           If width scales 300->220 (0.73x).
           Depth 40->30?
        */
        width: 30px;
        /* Center X at 214px? (220-6)
          Left = 214 - 15 = 199.
       */
        left: 199px;
        height: 318px;
        /* 330 - 12 (6 top/bottom) */
    }

    .top,
    .bottom {
        width: 210px;
        /* Start 4, End 214 */
        height: 30px;
        /* Scaled depth */
    }

    .top {
        top: -9px;
        /* Center Y=6. Height 30. Half=15. 6-15 = -9 */
    }

    .bottom {
        bottom: -9px;
    }
}