# PanaversityFS Configuration
# Copy to .env and update values

# ============================================
# Storage Backend (choose one: fs, s3, supabase)
# ============================================
PANAVERSITY_STORAGE_BACKEND=fs

# ============================================
# Local Filesystem (when STORAGE_BACKEND=fs)
# ============================================
# Use relative path for in-repo storage (recommended for dev)
PANAVERSITY_STORAGE_ROOT=./data
# Or use absolute path for system-wide storage
# PANAVERSITY_STORAGE_ROOT=/tmp/panaversity-data

# ============================================
# Cloudflare R2 / AWS S3 (when STORAGE_BACKEND=s3)
# ============================================
# PANAVERSITY_S3_BUCKET=your-bucket-name
# PANAVERSITY_S3_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
# PANAVERSITY_S3_ACCESS_KEY_ID=your-access-key
# PANAVERSITY_S3_SECRET_ACCESS_KEY=your-secret-key
# PANAVERSITY_S3_REGION=auto

# ============================================
# Supabase Storage (when STORAGE_BACKEND=supabase)
# ============================================
# PANAVERSITY_SUPABASE_URL=https://your-project.supabase.co
# PANAVERSITY_SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
# PANAVERSITY_SUPABASE_BUCKET=panaversity-books

# ============================================
# Server Configuration
# ============================================
PANAVERSITY_SERVER_HOST=0.0.0.0
PANAVERSITY_SERVER_PORT=8000

# ============================================
# JWT Authentication (OAuth 2.1 compliant)
# ============================================
# Auth is DISABLED by default. To enable, set JWT_SECRET.
# NOTE: Requires external OAuth provider (Auth0, Keycloak, Supabase Auth)
# that issues JWT tokens. PanaversityFS validates tokens but doesn't issue them.

# Secret key for HS256 JWT verification (required to enable auth)
# PANAVERSITY_JWT_SECRET=your-jwt-secret-key

# JWT algorithm (default: HS256, options: HS256, HS384, HS512)
# PANAVERSITY_JWT_ALGORITHM=HS256

# JWT issuer URL for validation (must match token's 'iss' claim)
# PANAVERSITY_AUTH_ISSUER=https://your-auth-provider.com

# JWT audience for validation (must match token's 'aud' claim)
# PANAVERSITY_AUTH_AUDIENCE=https://api.panaversity.com

# Required scopes as comma-separated string (default: read,write)
# PANAVERSITY_REQUIRED_SCOPES_STR=read,write

# This server's public URL (for RFC 9728 OAuth metadata)
# PANAVERSITY_RESOURCE_SERVER_URL=https://your-server.com

# ============================================
# Legacy API Key Authentication (deprecated)
# ============================================
# PANAVERSITY_API_KEY=your-api-key

# ============================================
# CDN Configuration
# ============================================
# For R2: Use your public bucket URL
# PANAVERSITY_CDN_BASE_URL=https://pub-xxxxx.r2.dev
# For Supabase:
# PANAVERSITY_CDN_BASE_URL=https://your-project.supabase.co/storage/v1/object/public/bucket-name

# ============================================
# Asset Upload Configuration
# ============================================
# Assets smaller than this use direct upload (default: 10MB)
# PANAVERSITY_MAX_DIRECT_UPLOAD_MB=10

# Maximum asset size allowed (default: 100MB)
# PANAVERSITY_MAX_ASSET_SIZE_MB=100

# Presigned URL validity period in seconds (default: 3600 = 1 hour)
# PANAVERSITY_PRESIGN_EXPIRY_SECONDS=3600

# ============================================
# Archive Generation Configuration
# ============================================
# Archive generation timeout in seconds (default: 60)
# PANAVERSITY_ARCHIVE_TIMEOUT_SECONDS=60

# ============================================
# Observability (optional)
# ============================================
# PANAVERSITY_SENTRY_DSN=https://xxx@sentry.io/xxx
PANAVERSITY_LOG_LEVEL=INFO
